fileFormatVersion: 2
guid: 7e368ca5c0f375f4090430add783184f
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst UnityEngine_1 = require(\"UnityEngine\");\r\nconst
    ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst MoveBlock_1 = require(\"./MoveBlock\");\r\n//
    This class is an implementation of the Object Pool pattern for better performance.\r\n//
    This pool can only use one type of block at a time\r\nclass BlockPool extends
    ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    Awake() {\r\n        this._activeList
    = [];\r\n        this._reserveList = [];\r\n        // Default value of the reservation
    amount\r\n        this._reserve = 2;\r\n        this._numberReserved = this._reserve;\r\n       
    this.difficultyLevel = this.blockPrefab.GetComponent($typeof(MoveBlock_1.default)).difficultyLevel;\r\n       
    this.initializeReserve();\r\n    }\r\n    // Initialization of the reservation
    with a default value of 2 blocks\r\n    initializeReserve() {\r\n        for
    (let i = 0; i < this._reserve; i++) {\r\n            let newBlockVariant = UnityEngine_1.GameObject.Instantiate(this.blockPrefab);\r\n           
    // Assign this block pool as reference for each block\r\n            // This
    reference is necessary to return the block once it has been used.\r\n           
    newBlockVariant.GetComponent($typeof(MoveBlock_1.default)).blockPool = this;\r\n           
    newBlockVariant.transform.parent = this.gameObject.transform;\r\n           
    newBlockVariant.SetActive(false);\r\n            this._reserveList.push(newBlockVariant);\r\n       
    }\r\n    }\r\n    // Get a reserve list block or create a new one if needed\r\n   
    // This method receives as a parameter the position in which the block will be
    located\r\n    getBlock(position) {\r\n        // If there is no block available,
    it is created\r\n        if (this._numberReserved == 0) {\r\n            let
    newBlockVariant = UnityEngine_1.GameObject.Instantiate(this.blockPrefab, position,
    UnityEngine_1.Quaternion.identity, this.transform);\r\n            // Assign
    this block pool as reference for each block\r\n            // This reference
    is necessary to return the block once it has been used.\r\n            newBlockVariant.GetComponent($typeof(MoveBlock_1.default)).blockPool
    = this;\r\n            this._reserveList.push(newBlockVariant);\r\n           
    this._numberReserved++;\r\n        }\r\n        const gameObject = this._reserveList.pop();\r\n       
    this._numberReserved--;\r\n        this._activeList.push(gameObject);\r\n       
    gameObject.transform.parent = this.gameObject.transform;\r\n        gameObject.transform.position
    = position;\r\n        gameObject.transform.rotation = UnityEngine_1.Quaternion.identity;\r\n       
    gameObject.SetActive(true);\r\n        return gameObject;\r\n    }\r\n    returnBlock(gameObject)
    {\r\n        // Get the index of the gameObject in the active list\r\n       
    const index = this._activeList.indexOf(gameObject);\r\n        if (index >= 0)
    {\r\n            this._activeList.splice(index, 1);\r\n            // Add it
    to the reserve:\r\n            this._reserveList.push(gameObject);\r\n           
    this._numberReserved++;\r\n            // Turn off the gameobject in reserve
    and motion disabled\r\n            gameObject.GetComponent($typeof(MoveBlock_1.default)).SetMoving(false);\r\n           
    gameObject.SetActive(false);\r\n        }\r\n    }\r\n}\r\nexports.default =
    BlockPool;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmxvY2tQb29sLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQmxvY2tQb29sLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNkNBQThEO0FBQzlELGlEQUFxRDtBQUNyRCwyQ0FBb0M7QUFFcEMscUZBQXFGO0FBQ3JGLHFEQUFxRDtBQUNyRCxNQUFxQixTQUFVLFNBQVEscUNBQXFCO0lBY2pELEtBQUs7UUFFUixJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQztRQUN0QixJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQztRQUV2QiwwQ0FBMEM7UUFDMUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFFbEIsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBRXJDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxZQUFZLFNBQUMsbUJBQVMsR0FBSSxlQUFlLENBQUM7UUFFbEYsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDN0IsQ0FBQztJQUVELHFFQUFxRTtJQUM3RCxpQkFBaUI7UUFFckIsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQ3JDO1lBQ0ksSUFBSSxlQUFlLEdBQUcsd0JBQVUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBZSxDQUFDO1lBRTdFLHFEQUFxRDtZQUNyRCx5RUFBeUU7WUFDekUsZUFBZSxDQUFDLFlBQVksU0FBQyxtQkFBUyxHQUFJLFNBQVMsR0FBRyxJQUFJLENBQUM7WUFDM0QsZUFBZSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUM7WUFDN0QsZUFBZSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNqQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztTQUMzQztJQUNMLENBQUM7SUFFRCx5REFBeUQ7SUFDekQsc0ZBQXNGO0lBQy9FLFFBQVEsQ0FBQyxRQUFpQjtRQUU3QixnREFBZ0Q7UUFDaEQsSUFBRyxJQUFJLENBQUMsZUFBZSxJQUFJLENBQUMsRUFDNUI7WUFDSSxJQUFJLGVBQWUsR0FBRyx3QkFBVSxDQUFDLFdBQVcsQ0FDeEMsSUFBSSxDQUFDLFdBQVcsRUFBRSxRQUFRLEVBQzFCLHdCQUFVLENBQUMsUUFBUSxFQUNuQixJQUFJLENBQUMsU0FBUyxDQUNILENBQUM7WUFFaEIscURBQXFEO1lBQ3JELHlFQUF5RTtZQUN6RSxlQUFlLENBQUMsWUFBWSxTQUFDLG1CQUFTLEdBQUksU0FBUyxHQUFHLElBQUksQ0FBQztZQUUzRCxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUN4QyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7U0FDMUI7UUFFRCxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzNDLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUV2QixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUVsQyxVQUFVLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQztRQUN4RCxVQUFVLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFDekMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsd0JBQVUsQ0FBQyxRQUFRLENBQUM7UUFDcEQsVUFBVSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUUzQixPQUFPLFVBQVUsQ0FBQztJQUN0QixDQUFDO0lBRU0sV0FBVyxDQUFDLFVBQXNCO1FBRXJDLHFEQUFxRDtRQUNyRCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNuRCxJQUFHLEtBQUssSUFBSSxDQUFDLEVBQ2I7WUFDSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFbEMseUJBQXlCO1lBQ3pCLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ25DLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUV2Qix5REFBeUQ7WUFDekQsVUFBVSxDQUFDLFlBQVksU0FBQyxtQkFBUyxHQUFJLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN0RCxVQUFVLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQy9CO0lBQ0wsQ0FBQztDQUVKO0FBakdELDRCQWlHQyJ9","assetPath":"Assets/Runner/Script/BlockPool.ts","manifest":{"properties":[{"assembly":"UnityEngine.CoreModule","name":"blockPrefab","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"mscorlib","name":"difficultyLevel","type":"System.Single","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]}],"name":"BlockPool","description":"","hasAnimatorMove":false},"isCompiled":true}'
  typescriptHash: 5970f7ccec207f62f00a896134b2984d
  onlyWriteTrigger: 0
