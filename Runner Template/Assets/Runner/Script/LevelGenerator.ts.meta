fileFormatVersion: 2
guid: 50770cb481467434a9a7d46e8856de97
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst __UnityEngine__ = require(\"UnityEngine\");\r\nconst
    UnityEngine_1 = require(\"UnityEngine\");\r\nconst GameManagerRunner_1 = require(\"./GameManagerRunner\");\r\nconst
    BlockPool_1 = require(\"./BlockPool\");\r\nconst MoveBlock_1 = require(\"./MoveBlock\");\r\nconst
    TimerManagerRunner_1 = require(\"./TimerManagerRunner\");\r\nclass LevelGenerator
    extends UnityEngine_1.MonoBehaviour {\r\n    Awake() {\r\n        if (LevelGenerator.Instance
    == null)\r\n            LevelGenerator.Instance = this;\r\n        else\r\n           
    UnityEngine_1.GameObject.Destroy(this);\r\n    }\r\n    Update() {\r\n       
    let time = TimerManagerRunner_1.default.Instance.GetTime();\r\n        let seconds
    = ((time % 60000));\r\n        if (seconds > this.difficultyLevelsTimeLimits[this._currentDifficultyLevel])
    {\r\n            this._currentDifficultyLevel++;\r\n        }\r\n    }\r\n   
    // The first block is activated and positioned, the rest are requested to their
    respective pools\r\n    InitializeLevel() {\r\n        this._currentDifficultyLevel
    = 0;\r\n        this._currentBlocksShowed = [];\r\n        let startBlocSpawnTransform
    = this.startBlockSpawnPoint.transform;\r\n        this.startBlockPrefab.SetActive(true);\r\n       
    this.startBlockPrefab.transform.position = startBlocSpawnTransform.position;\r\n       
    this._firstBlock = this.startBlockPrefab;\r\n        this._currentBlocksShowed.push(this._firstBlock);\r\n       
    this._lastBlock = this._firstBlock;\r\n        this.GenerateBlock();\r\n    }\r\n   
    // To generate a block, a random block pool is selected and then a block is requested\r\n   
    GenerateBlock() {\r\n        let isValidPool = false;\r\n        let n = 0;\r\n       
    while (!isValidPool) {\r\n            n = Math.floor(UnityEngine_1.Random.Range(0,
    this.blockPools.length));\r\n            if (this.blockPools[n].GetComponent($typeof(BlockPool_1.default)).GetDifficultyLevel()
    <= this._currentDifficultyLevel) {\r\n                isValidPool = true;\r\n           
    }\r\n        }\r\n        let Pos = this._lastBlock.transform.GetChild(0).transform.position;\r\n       
    let block = this.blockPools[n].GetComponent($typeof(BlockPool_1.default)).getBlock(Pos);\r\n       
    this._lastBlock = block;\r\n        // Each generated block is added to an array
    for later reset and set in motion\r\n        this._currentBlocksShowed.push(block);\r\n       
    this._lastBlock.GetComponent($typeof(MoveBlock_1.default)).SetMoving(GameManagerRunner_1.default.Instance.isGameRunning);\r\n       
    this.SetBlocksSpeed();\r\n    }\r\n    SetBlocksSpeed() {\r\n        this._currentBlocksShowed.forEach(blockElement
    => {\r\n            if (this.levelSpeedByDifficulty[this._currentDifficultyLevel]
    != null) {\r\n                blockElement.GetComponent($typeof(MoveBlock_1.default)).SetSpeed(this.levelSpeedByDifficulty[this._currentDifficultyLevel]);\r\n           
    }\r\n        });\r\n    }\r\n    // This method enables the movement of the blocks
    and additionally defines when the game is running\r\n    SetBlocksMovement(value)
    {\r\n        GameManagerRunner_1.default.Instance.isGameRunning = value;\r\n       
    this._currentBlocksShowed.forEach(blockElement => {\r\n            blockElement.GetComponent($typeof(MoveBlock_1.default)).SetMoving(value);\r\n       
    });\r\n        if (__UnityEngine__.Object.op_Inequality(this._blockToDelete,
    null)) {\r\n            this._blockToDelete.GetComponent($typeof(MoveBlock_1.default)).SetMoving(value);\r\n       
    }\r\n    }\r\n    RemoveLastBlock() {\r\n        this._blockToDelete = this._currentBlocksShowed.shift();\r\n       
    this.RemoveFirstOrReturnToPool(this._blockToDelete);\r\n    }\r\n    ResetLevel()
    {\r\n        this._currentBlocksShowed.forEach(blockElement => {\r\n           
    this.RemoveFirstOrReturnToPool(blockElement);\r\n        });\r\n        this._currentDifficultyLevel
    = 0;\r\n        this._currentBlocksShowed = [];\r\n    }\r\n    // If it is the
    StartBlock, the GameObject is deactivated, if not it is returned to its respective
    pool\r\n    RemoveFirstOrReturnToPool(element) {\r\n        if (__UnityEngine__.Object.op_Equality(element,
    this.startBlockPrefab)) {\r\n            // In case of being the initial block,
    the movement is deactivated\r\n            element.GetComponent($typeof(MoveBlock_1.default)).SetMoving(false);\r\n           
    element.SetActive(false);\r\n        }\r\n        else {\r\n            element.GetComponent($typeof(MoveBlock_1.default)).ReturnToPool();\r\n       
    }\r\n    }\r\n}\r\nexports.default = LevelGenerator;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGV2ZWxHZW5lcmF0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJMZXZlbEdlbmVyYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw2Q0FBdUU7QUFDdkUsMkRBQW9EO0FBQ3BELDJDQUFvQztBQUNwQywyQ0FBb0M7QUFDcEMsNkRBQXNEO0FBRXRELE1BQXFCLGNBQWUsU0FBUSwyQkFBYTtJQXFCOUMsS0FBSztRQUVSLElBQUksY0FBYyxDQUFDLFFBQVEsSUFBSSxJQUFJO1lBQUUsY0FBYyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7O1lBQy9ELHdCQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xDLENBQUM7SUFFRCxNQUFNO1FBRUYsSUFBSSxJQUFJLEdBQUcsNEJBQWtCLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBWSxDQUFDO1FBQzNELElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUMvQixJQUFHLE9BQU8sR0FBRyxJQUFJLENBQUMsMEJBQTBCLENBQUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLEVBQzFFO1lBQ0ksSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7U0FDbEM7SUFDTCxDQUFDO0lBRUQsZ0dBQWdHO0lBQ3pGLGVBQWU7UUFFbEIsSUFBSSxDQUFDLHVCQUF1QixHQUFHLENBQUMsQ0FBQztRQUNqQyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsRUFBRSxDQUFDO1FBQy9CLElBQUksdUJBQXVCLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsQ0FBQztRQUVsRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsUUFBUSxHQUFHLHVCQUF1QixDQUFDLFFBQVEsQ0FBQztRQUM1RSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FB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","assetPath":"Assets/Runner/Script/LevelGenerator.ts","manifest":{"properties":[{"assembly":"UnityEngine.CoreModule","name":"blockPools","type":"UnityEngine.GameObject[]","isArray":true,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"mscorlib","name":"difficultyLevelsTimeLimits","type":"System.Single[]","isArray":true,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"mscorlib","name":"levelSpeedByDifficulty","type":"System.Single[]","isArray":true,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"startBlockPrefab","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"startBlockSpawnPoint","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]}],"name":"LevelGenerator","description":"","hasAnimatorMove":false},"isCompiled":true}'
  typescriptHash: 04309ddf7e71cc695808023dabb1e37b
  onlyWriteTrigger: 0
